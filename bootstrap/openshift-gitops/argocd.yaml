apiVersion: argoproj.io/v1beta1
kind: ArgoCD
metadata:
  name: openshift-gitops 
  namespace: openshift-gitops
spec:
  server:
    route:
      enabled: true
  sso:
    provider: dex
    dex:
      openShiftOAuth: true
      config: |
        insecureSkipVerify: true
        connectors:
        - config:
            clientID: system:serviceaccount:openshift-gitops:openshift-gitops-argocd-dex-server
            clientSecret: $oidc.dex.clientSecret
            groups: []
            insecureCA: true
            issuer: https://kubernetes.default.svc
            redirectURI: https://openshift-gitops-server-openshift-gitops.apps.cilium.danila.home/auth/callback
          id: openshift
          name: OpenShift